{"version":"0.1.0","name":"sfdn_oracle","instructions":[{"name":"initializeProgram","accounts":[{"name":"globalState","isMut":true,"isSigner":false},{"name":"vaultAuthority","isMut":false,"isSigner":false},{"name":"tokenVault","isMut":true,"isSigner":false},{"name":"governanceState","isMut":true,"isSigner":false},{"name":"tokenMint","isMut":false,"isSigner":false},{"name":"vaultTokenAccount","isMut":false,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"rewardRate","type":"u64"},{"name":"proposalThreshold","type":"u64"},{"name":"votingPeriod","type":"u64"},{"name":"quorumPercentage","type":"u8"},{"name":"timelockDuration","type":"u64"},{"name":"totalSupply","type":"u64"}]},{"name":"createProduct","accounts":[{"name":"globalState","isMut":true,"isSigner":false},{"name":"productAccount","isMut":true,"isSigner":false},{"name":"priceAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"symbol","type":"string"},{"name":"assetType","type":{"defined":"AssetType"}},{"name":"description","type":"string"},{"name":"priceType","type":{"defined":"PriceType"}},{"name":"minPublishers","type":"u8"},{"name":"exponent","type":"i32"}]},{"name":"addPublisher","accounts":[{"name":"globalState","isMut":true,"isSigner":false},{"name":"publisherAccount","isMut":true,"isSigner":false},{"name":"tokenVault","isMut":true,"isSigner":false},{"name":"publisherTokenAccount","isMut":true,"isSigner":false},{"name":"vaultTokenAccount","isMut":true,"isSigner":false},{"name":"publisherAuthority","isMut":false,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"name","type":"string"},{"name":"initialStake","type":"u64"}]},{"name":"updatePrice","accounts":[{"name":"globalState","isMut":false,"isSigner":false},{"name":"productAccount","isMut":false,"isSigner":false},{"name":"priceAccount","isMut":true,"isSigner":false},{"name":"publisherAccount","isMut":false,"isSigner":false},{"name":"publisherAuthority","isMut":false,"isSigner":true}],"args":[{"name":"price","type":"i64"},{"name":"confidence","type":"u64"}]},{"name":"stakeTokens","accounts":[{"name":"globalState","isMut":false,"isSigner":false},{"name":"publisherAccount","isMut":true,"isSigner":false},{"name":"tokenVault","isMut":true,"isSigner":false},{"name":"publisherTokenAccount","isMut":true,"isSigner":false},{"name":"vaultTokenAccount","isMut":true,"isSigner":false},{"name":"publisherAuthority","isMut":false,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"unstakeTokens","accounts":[{"name":"globalState","isMut":false,"isSigner":false},{"name":"publisherAccount","isMut":true,"isSigner":false},{"name":"publisherAuthority","isMut":false,"isSigner":true}],"args":[{"name":"amount","type":"u64"}]},{"name":"withdrawUnbonded","accounts":[{"name":"globalState","isMut":false,"isSigner":false},{"name":"publisherAccount","isMut":true,"isSigner":false},{"name":"vaultAuthority","isMut":false,"isSigner":false},{"name":"tokenVault","isMut":true,"isSigner":false},{"name":"publisherTokenAccount","isMut":true,"isSigner":false},{"name":"vaultTokenAccount","isMut":true,"isSigner":false},{"name":"publisherAuthority","isMut":false,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"aggregatePrice","accounts":[{"name":"productAccount","isMut":false,"isSigner":false},{"name":"priceAccount","isMut":true,"isSigner":false}],"args":[]},{"name":"createProposal","accounts":[{"name":"globalState","isMut":false,"isSigner":false},{"name":"governanceState","isMut":true,"isSigner":false},{"name":"proposal","isMut":true,"isSigner":false},{"name":"proposerTokenAccount","isMut":false,"isSigner":false},{"name":"proposer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"proposalType","type":{"defined":"ProposalType"}},{"name":"description","type":"string"}]},{"name":"voteProposal","accounts":[{"name":"proposal","isMut":true,"isSigner":false},{"name":"voterTokenAccount","isMut":false,"isSigner":false},{"name":"voter","isMut":false,"isSigner":true}],"args":[{"name":"vote","type":{"defined":"VoteType"}}]},{"name":"executeProposal","accounts":[{"name":"proposal","isMut":true,"isSigner":false},{"name":"governanceState","isMut":false,"isSigner":false}],"args":[]},{"name":"executeGovernanceAction","accounts":[{"name":"globalState","isMut":true,"isSigner":false},{"name":"proposal","isMut":false,"isSigner":false},{"name":"governanceState","isMut":false,"isSigner":false},{"name":"tokenVault","isMut":true,"isSigner":false},{"name":"priceAccount","isMut":true,"isSigner":false,"isOptional":true},{"name":"publisherAccount","isMut":true,"isSigner":false,"isOptional":true},{"name":"authority","isMut":false,"isSigner":true}],"args":[]},{"name":"emergencyPause","accounts":[{"name":"globalState","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]},{"name":"emergencyUnpause","accounts":[{"name":"globalState","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]}],"accounts":[{"name":"GlobalState","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"tokenMint","type":"publicKey"},{"name":"tokenVault","type":"publicKey"},{"name":"vaultAuthority","type":"publicKey"},{"name":"governance","type":"publicKey"},{"name":"paused","type":"bool"},{"name":"totalProducts","type":"u64"},{"name":"totalPublishers","type":"u64"},{"name":"version","type":"u8"},{"name":"bump","type":"u8"},{"name":"vaultAuthorityBump","type":"u8"}]}},{"name":"ProductAccount","type":{"kind":"struct","fields":[{"name":"symbol","type":"string"},{"name":"assetType","type":{"defined":"AssetType"}},{"name":"description","type":"string"},{"name":"priceAccount","type":"publicKey"},{"name":"authority","type":"publicKey"},{"name":"bump","type":"u8"}]}},{"name":"PriceAccount","type":{"kind":"struct","fields":[{"name":"productAccount","type":"publicKey"},{"name":"priceType","type":{"defined":"PriceType"}},{"name":"aggregate","type":{"defined":"PriceData"}},{"name":"publishers","type":{"array":[{"defined":"PublisherPrice"},100]}},{"name":"publisherCount","type":"u8"},{"name":"minPublishers","type":"u8"},{"name":"lastUpdateSlot","type":"u64"},{"name":"ema","type":{"defined":"EmaData"}},{"name":"authority","type":"publicKey"},{"name":"exponent","type":"i32"},{"name":"bump","type":"u8"}]}},{"name":"PublisherAccount","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"stakedAmount","type":"u64"},{"name":"stakeAccount","type":"publicKey"},{"name":"reputation","type":"u64"},{"name":"name","type":"string"},{"name":"registeredAt","type":"i64"},{"name":"slashCount","type":"u32"},{"name":"lastSlashSlot","type":"u64"},{"name":"unbondingAmount","type":"u64"},{"name":"unbondingStart","type":"i64"},{"name":"bump","type":"u8"}]}},{"name":"TokenVault","type":{"kind":"struct","fields":[{"name":"totalStaked","type":"u64"},{"name":"totalRewardsDistributed","type":"u64"},{"name":"rewardRate","type":"u64"},{"name":"lastDistributionSlot","type":"u64"},{"name":"tokenMint","type":"publicKey"},{"name":"vaultTokenAccount","type":"publicKey"},{"name":"vaultAuthority","type":"publicKey"},{"name":"authority","type":"publicKey"},{"name":"bump","type":"u8"}]}},{"name":"GovernanceState","type":{"kind":"struct","fields":[{"name":"governanceToken","type":"publicKey"},{"name":"proposalThreshold","type":"u64"},{"name":"votingPeriod","type":"u64"},{"name":"quorumPercentage","type":"u8"},{"name":"timelockDuration","type":"u64"},{"name":"proposalCount","type":"u64"},{"name":"totalSupply","type":"u64"},{"name":"authority","type":"publicKey"},{"name":"bump","type":"u8"}]}},{"name":"Proposal","type":{"kind":"struct","fields":[{"name":"proposer","type":"publicKey"},{"name":"proposalType","type":{"defined":"ProposalType"}},{"name":"description","type":"string"},{"name":"yesVotes","type":"u64"},{"name":"noVotes","type":"u64"},{"name":"abstainVotes","type":"u64"},{"name":"startSlot","type":"u64"},{"name":"endSlot","type":"u64"},{"name":"executed","type":"bool"},{"name":"executionTime","type":"i64"},{"name":"proposalId","type":"u64"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"PriceData","type":{"kind":"struct","fields":[{"name":"price","type":"i64"},{"name":"confidence","type":"u64"},{"name":"exponent","type":"i32"},{"name":"timestamp","type":"i64"},{"name":"slot","type":"u64"},{"name":"status","type":{"defined":"PriceStatus"}}]}},{"name":"PublisherPrice","type":{"kind":"struct","fields":[{"name":"publisher","type":"publicKey"},{"name":"price","type":"i64"},{"name":"confidence","type":"u64"},{"name":"timestamp","type":"i64"},{"name":"slot","type":"u64"},{"name":"stake","type":"u64"},{"name":"active","type":"bool"}]}},{"name":"EmaData","type":{"kind":"struct","fields":[{"name":"emaPrice","type":"i64"},{"name":"emaConfidence","type":"u64"},{"name":"numObservations","type":"u64"}]}},{"name":"PriceStatus","type":{"kind":"enum","variants":[{"name":"Trading"},{"name":"Halted"},{"name":"Auction"},{"name":"Unknown"}]}},{"name":"AssetType","type":{"kind":"enum","variants":[{"name":"Crypto"},{"name":"Equity"},{"name":"Forex"},{"name":"Commodity"}]}},{"name":"PriceType","type":{"kind":"enum","variants":[{"name":"Spot"},{"name":"Futures"},{"name":"Option"}]}},{"name":"VoteType","type":{"kind":"enum","variants":[{"name":"Yes"},{"name":"No"},{"name":"Abstain"}]}},{"name":"ProposalType","type":{"kind":"enum","variants":[{"name":"UpdateRewardRate","fields":[{"name":"newRate","type":"u64"}]},{"name":"UpdateMinPublishers","fields":[{"name":"feed","type":"publicKey"},{"name":"newMin","type":"u8"}]},{"name":"SlashPublisher","fields":[{"name":"publisher","type":"publicKey"},{"name":"percentage","type":"u8"}]},{"name":"EmergencyPause"},{"name":"EmergencyUnpause"},{"name":"UpdateGovernanceParams","fields":[{"name":"proposalThreshold","type":{"option":"u64"}},{"name":"votingPeriod","type":{"option":"u64"}},{"name":"quorumPercentage","type":{"option":"u8"}},{"name":"timelockDuration","type":{"option":"u64"}}]}]}}],"events":[{"name":"PriceUpdated","fields":[{"name":"product","type":"publicKey","index":false},{"name":"symbol","type":"string","index":false},{"name":"price","type":"i64","index":false},{"name":"confidence","type":"u64","index":false},{"name":"timestamp","type":"i64","index":false},{"name":"slot","type":"u64","index":false},{"name":"status","type":{"defined":"PriceStatus"},"index":false}]},{"name":"PublisherAdded","fields":[{"name":"publisher","type":"publicKey","index":false},{"name":"authority","type":"publicKey","index":false},{"name":"stakeAmount","type":"u64","index":false},{"name":"name","type":"string","index":false}]},{"name":"PublisherSlashed","fields":[{"name":"publisher","type":"publicKey","index":false},{"name":"slashAmount","type":"u64","index":false},{"name":"slashPercentage","type":"u8","index":false},{"name":"reason","type":"string","index":false}]},{"name":"ProposalCreated","fields":[{"name":"proposalId","type":"u64","index":false},{"name":"proposer","type":"publicKey","index":false},{"name":"proposalType","type":{"defined":"ProposalType"},"index":false},{"name":"description","type":"string","index":false}]},{"name":"ProposalExecuted","fields":[{"name":"proposalId","type":"u64","index":false},{"name":"proposalType","type":{"defined":"ProposalType"},"index":false}]},{"name":"SystemPaused","fields":[{"name":"timestamp","type":"i64","index":false},{"name":"authority","type":"publicKey","index":false}]},{"name":"SystemUnpaused","fields":[{"name":"timestamp","type":"i64","index":false},{"name":"authority","type":"publicKey","index":false}]}],"errors":[{"code":6000,"name":"PriceNotTrading","msg":"Price feed is not in trading status"},{"code":6001,"name":"PriceStale","msg":"Price data is stale"},{"code":6002,"name":"InsufficientStake","msg":"Insufficient stake amount"},{"code":6003,"name":"UnauthorizedPublisher","msg":"Publisher not authorized for this feed"},{"code":6004,"name":"InsufficientPublishers","msg":"Not enough publishers reporting"},{"code":6005,"name":"InvalidPrice","msg":"Invalid price data"},{"code":6006,"name":"InvalidTimestamp","msg":"Invalid timestamp"},{"code":6007,"name":"ConfidenceTooLarge","msg":"Confidence interval too large"},{"code":6008,"name":"Overflow","msg":"Arithmetic overflow"},{"code":6009,"name":"PublisherExists","msg":"Publisher already exists"},{"code":6010,"name":"Unauthorized","msg":"Unauthorized action"},{"code":6011,"name":"ProposalNotApproved","msg":"Proposal not approved"},{"code":6012,"name":"UnbondingPeriodActive","msg":"Unbonding period not elapsed"},{"code":6013,"name":"SystemPaused","msg":"System is paused"},{"code":6014,"name":"InvalidSlashPercentage","msg":"Invalid slash percentage"},{"code":6015,"name":"VotingPeriodEnded","msg":"Voting period ended"},{"code":6016,"name":"QuorumNotReached","msg":"Quorum not reached"},{"code":6017,"name":"TimelockNotExpired","msg":"Timelock not expired"},{"code":6018,"name":"PublishersArrayFull","msg":"Publishers array is full"},{"code":6019,"name":"InvalidProposalType","msg":"Invalid proposal type"},{"code":6020,"name":"VotingPeriodActive","msg":"Voting period active"}]}